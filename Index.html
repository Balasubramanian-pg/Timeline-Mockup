<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>HCP 360 Engagement Timeline</title>
    <!-- Font: Afacad -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Afacad:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --font-main: 'Afacad', sans-serif;
            --bg-body: #f0f2f5;
            --bg-card: #ffffff;
            
            /* Pharma Specific Color Palette */
            --c-call: #2E7D32;      /* Green - Face to Face (Detail) */
            --c-rte: #a05195;       /* Purple - Rep Triggered Email */
            --c-marketing: #FBC02D; /* Yellow - HQ Blasts */
            --c-p2p: #00838F;       /* Teal - Peer to Peer/Speaker */
            --c-npp: #E64A19;       /* Orange - Non-Personal Promo (Display) */
            --c-cost: #455A64;      /* Grey/Blue - Transfer of Value (Cost) */
            
            --c-danger: #D32F2F;    /* RAG Red */
            --c-text-dark: #263238;
            --c-text-muted: #78909C;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-body);
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
        }

        /* --- HUD Container --- */
        .hud-panel {
            width: 950px;
            background: var(--bg-card);
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.06);
            padding: 30px 40px;
            position: relative;
            border: 1px solid #ECEFF1;
            /* Added padding bottom to accommodate labels */
            padding-bottom: 20px; 
        }

        /* --- Top Bar: HCP Info & RAG Status --- */
        .top-bar {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 30px;
        }

        .hcp-profile h2 {
            margin: 0;
            font-size: 26px;
            font-weight: 700;
            color: var(--c-text-dark);
            letter-spacing: -0.5px;
        }

        .hcp-profile .meta {
            margin-top: 4px;
            font-size: 14px;
            color: var(--c-text-muted);
            display: flex;
            gap: 15px;
        }

        .meta span {
            display: flex;
            align-items: center;
            gap: 5px;
        }

        /* --- The Red Status Pill (Rag Status) --- */
        .status-pill {
            background: rgba(211, 47, 47, 0.08);
            border: 1px solid var(--c-danger);
            color: var(--c-danger);
            padding: 8px 16px;
            border-radius: 50px;
            font-weight: 600;
            font-size: 13px;
            display: flex;
            align-items: center;
            gap: 8px;
            box-shadow: 0 4px 12px rgba(211, 47, 47, 0.1);
            animation: pulse-border 2s infinite;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background-color: var(--c-danger);
            border-radius: 50%;
        }

        /* --- Filters / Toggles --- */
        .controls {
            display: flex;
            gap: 12px;
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid #ECEFF1;
        }

        .toggle-btn {
            background: #F5F7F8;
            border: none;
            padding: 8px 16px;
            border-radius: 6px;
            font-family: var(--font-main);
            font-size: 14px;
            color: var(--c-text-muted);
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .toggle-btn.active, .toggle-btn:hover {
            background: var(--c-text-dark);
            color: #fff;
        }

        /* --- Timeline Visual --- */
        .timeline-container {
            position: relative;
            /* INCREASED HEIGHT to prevent overlap */
            height: 200px; 
            display: flex;
            align-items: center;
            margin-top: 10px;
        }

        /* The central line */
        .timeline-axis {
            position: absolute;
            top: 45%; /* Slightly higher to leave room at bottom */
            left: 0;
            right: 0;
            height: 4px;
            background: #CFD8DC;
            border-radius: 2px;
            z-index: 0;
        }

        /* Gradient fill */
        .axis-fill {
            position: absolute;
            top: 45%;
            left: 0;
            height: 4px;
            background: linear-gradient(90deg, var(--c-npp) 0%, var(--c-call) 100%);
            width: 90%; 
            transform: translateY(-50%);
            z-index: 0;
            opacity: 0.4;
        }

        /* --- Nodes --- */
        .node {
            position: absolute;
            top: 45%; /* Matches axis top */
            transform: translate(-50%, -50%);
            z-index: 2;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Inner Circle (Icon Container) */
        .node-icon {
            width: 48px;
            height: 48px;
            background: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            border: 3px solid #b0bec5;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            position: relative;
        }

        .node-icon svg {
            width: 22px;
            height: 22px;
            fill: #78909C;
            transition: fill 0.3s;
        }

        /* Label below node */
        .node-label {
            position: absolute;
            top: 60px; /* Distance from center of node */
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            width: 140px;
            transition: all 0.3s;
            pointer-events: none; /* Let clicks pass through to axis if needed */
        }

        .node-date {
            display: block;
            font-weight: 700;
            color: var(--c-text-dark);
            font-size: 15px;
            margin-bottom: 2px;
        }
        
        .node-type {
            display: block;
            font-size: 12px;
            color: var(--c-text-muted);
            text-transform: uppercase;
            letter-spacing: 0.5px;
            font-weight: 500;
        }

        /* --- Hover States --- */
        .node:hover {
            z-index: 10;
        }

        .node:hover .node-icon {
            transform: scale(1.15);
            box-shadow: 0 15px 30px rgba(0,0,0,0.15);
            border-color: currentColor !important; 
        }
        
        .node:hover svg {
            fill: currentColor !important;
        }

        /* --- Popover Card --- */
        .popover {
            position: absolute;
            bottom: 75px; 
            left: 50%;
            transform: translateX(-50%) translateY(10px);
            width: 200px;
            background: var(--c-text-dark);
            color: white;
            padding: 15px;
            border-radius: 12px;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
            pointer-events: none;
            box-shadow: 0 10px 25px rgba(0,0,0,0.25);
            text-align: left;
            z-index: 100;
        }

        .popover::after {
            content: '';
            position: absolute;
            top: 100%;
            left: 50%;
            margin-left: -8px;
            border-width: 8px;
            border-style: solid;
            border-color: var(--c-text-dark) transparent transparent transparent;
        }

        .node:hover .popover {
            opacity: 1;
            visibility: visible;
            transform: translateX(-50%) translateY(0);
        }

        .popover-header {
            font-size: 11px;
            text-transform: uppercase;
            color: #90A4AE;
            margin-bottom: 5px;
            border-bottom: 1px solid #37474F;
            padding-bottom: 5px;
        }

        .popover-content {
            font-size: 13px;
            line-height: 1.4;
        }
        
        .popover-metric {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-weight: 700;
            color: #fff;
        }

        /* Node Specific Styles */
        .npp { color: var(--c-npp); }
        .rte { color: var(--c-rte); }
        .cost { color: var(--c-cost); }
        .p2p { color: var(--c-p2p); }
        .call { color: var(--c-call); }

        /* --- Axis Labels (Fixed at Bottom) --- */
        .axis-labels {
            display: flex;
            justify-content: space-between;
            font-size: 12px;
            color: var(--c-text-muted);
            /* MOVED DOWN using margin and border */
            margin-top: 10px; 
            padding-top: 15px;
            border-top: 1px dashed #cfd8dc;
        }

        @keyframes pulse-border {
            0% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0.4); }
            70% { box-shadow: 0 0 0 6px rgba(211, 47, 47, 0); }
            100% { box-shadow: 0 0 0 0 rgba(211, 47, 47, 0); }
        }

    </style>
</head>
<body>

<div class="hud-panel">

    <!-- Header -->
    <div class="top-bar">
        <div class="hcp-profile">
            <h2>Dr. Natasha Romanoff</h2>
            <div class="meta">
                <span><svg width="14" height="14" viewBox="0 0 24 24" fill="#78909C"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg> NYC, NY</span>
                <span>Tier: 1</span>
                <span>Decile: 9</span>
                <span>Specialty: Oncology</span>
            </div>
        </div>
        
        <!-- Red RAG Pill -->
        <div class="status-pill">
            <div class="status-indicator"></div>
            NRx TREND: DECLINING (RISK)
        </div>
    </div>

    <!-- Controls -->
    <div class="controls">
        <button class="toggle-btn active" onclick="filterView('all')">Omnichannel View</button>
        <button class="toggle-btn" onclick="filterView('digital')">Digital Only</button>
        <button class="toggle-btn" onclick="filterView('f2f')">Field Activity</button>
        <button class="toggle-btn" onclick="filterView('cost')">Spend / ToV</button>
    </div>

    <!-- Timeline -->
    <div class="timeline-container">
        <div class="timeline-axis"></div>
        <div class="axis-fill"></div>

        <!-- Node: NPP -->
        <div class="node npp" style="left: 10%">
            <div class="popover">
                <div class="popover-header">NPP / Digital</div>
                <div class="popover-content">
                    Campaign: Immuno-Onc Q3<br>
                    Channel: Medscape Banner
                    <div class="popover-metric">Impr: 15</div>
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-npp)">
                <svg viewBox="0 0 24 24"><path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">May 10</span>
                <span class="node-type">NPP Display</span>
            </div>
        </div>

        <!-- Node: RTE Sent -->
        <div class="node rte" style="left: 30%">
            <div class="popover">
                <div class="popover-header">Rep Triggered Email</div>
                <div class="popover-content">
                    Template: New Dosing Guidelines<br>
                    Status: Sent
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-rte)">
                <svg viewBox="0 0 24 24"><path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">June 12</span>
                <span class="node-type">RTE Sent</span>
            </div>
        </div>

        <!-- Node: RTE Open -->
        <div class="node rte" style="left: 45%">
            <div class="popover">
                <div class="popover-header">Digital Engagement</div>
                <div class="popover-content">
                    Action: Opened & Clicked<br>
                    Link: Patient Profile PDF
                    <div class="popover-metric">Time: 45s</div>
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-rte)">
                <svg viewBox="0 0 24 24"><path d="M9 11.24V7.5C9 6.12 10.12 5 11.5 5S14 6.12 14 7.5v3.74c1.21-.81 2-2.18 2-3.74C16 5.01 13.99 3 11.5 3S7 5.01 7 7.5c0 1.56.79 2.93 2 3.74zm9.84 4.63l-4.54-2.26c-.17-.07-.35-.11-.54-.11H13v-6c0-.83-.67-1.5-1.5-1.5S10 6.67 10 7.5v10.74l-3.43-.72c-.08-.01-.15-.03-.24-.03-.31 0-.59.13-.79.33l-.79.8 4.94 4.94c.27.27.65.44 1.06.44h6.79c.75 0 1.33-.55 1.44-1.28l.75-5.27c.01-.07.02-.14.02-.2 0-.62-.38-1.16-.91-1.38z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">June 14</span>
                <span class="node-type">RTE Open</span>
            </div>
        </div>

        <!-- Node: Spend/ToV -->
        <div class="node cost" style="left: 65%">
            <div class="popover">
                <div class="popover-header">Transfer of Value</div>
                <div class="popover-content">
                    Type: Meal / F&B<br>
                    Venue: Smith & Wollensky
                    <div class="popover-metric">Spend: $125.00</div>
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-cost)">
                <svg viewBox="0 0 24 24"><path d="M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">July 01</span>
                <span class="node-type">ToV (Meal)</span>
            </div>
        </div>

        <!-- Node: P2P -->
        <div class="node p2p" style="left: 75%">
            <div class="popover">
                <div class="popover-header">P2P Program</div>
                <div class="popover-content">
                    Role: Attendee<br>
                    Topic: Efficacy Data
                    <div class="popover-metric">KOL: Dr. X</div>
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-p2p)">
                <svg viewBox="0 0 24 24"><path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">July 01</span>
                <span class="node-type">P2P Event</span>
            </div>
        </div>

        <!-- Node: Call -->
        <div class="node call" style="left: 90%">
            <div class="popover">
                <div class="popover-header">Field Activity</div>
                <div class="popover-content">
                    Type: 1:1 Detail<br>
                    Product: Brand A
                    <div class="popover-metric">Samples: Yes</div>
                </div>
            </div>
            <div class="node-icon" style="border-color: var(--c-call)">
                <svg viewBox="0 0 24 24"><path d="M20 6h-4V4c0-1.11-.89-2-2-2h-4c-1.11 0-2 .89-2 2v2H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-6 0h-4V4h4v2z"/></svg>
            </div>
            <div class="node-label">
                <span class="node-date">July 14</span>
                <span class="node-type">F2F Detail</span>
            </div>
        </div>

    </div>

    <!-- AXIS LABELS: Moved out of the overlap danger zone -->
    <div class="axis-labels">
        <span>R12M (Rolling 12 Months)</span>
        <span>TODAY</span>
    </div>

</div>

<script>
    function filterView(type) {
        // Toggle Active State
        document.querySelectorAll('.toggle-btn').forEach(btn => btn.classList.remove('active'));
        event.target.classList.add('active');

        // Filter Logic
        const nodes = document.querySelectorAll('.node');
        nodes.forEach(node => {
            node.style.opacity = '1'; // Reset
            
            if (type === 'all') return;

            const isDigital = node.classList.contains('rte') || node.classList.contains('npp');
            const isF2F = node.classList.contains('call') || node.classList.contains('p2p');
            const isCost = node.classList.contains('cost');

            if (type === 'digital' && !isDigital) node.style.opacity = '0.1';
            if (type === 'f2f' && !isF2F) node.style.opacity = '0.1';
            if (type === 'cost' && !isCost) node.style.opacity = '0.1';
        });
    }
</script>

</body>
</html>
